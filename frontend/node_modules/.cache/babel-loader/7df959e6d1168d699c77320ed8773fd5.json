{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _scrollfeatures = require('scrollfeatures');\n\nvar _scrollfeatures2 = _interopRequireDefault(_scrollfeatures);\n\nvar _objectAssign = require('object-assign');\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _featureDetect = require('./featureDetect');\n\nvar _featureDetect2 = _interopRequireDefault(_featureDetect);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar log = function log() {};\n\nvar initialState = {\n  initialized: false,\n  sticky: false,\n  absolute: false,\n  fixedOffset: '',\n  offsetHeight: 0,\n  bounds: {\n    top: null,\n    left: null,\n    right: null,\n    bottom: null,\n    height: null,\n    width: null\n  },\n  restrict: {\n    top: null,\n    left: null,\n    right: null,\n    bottom: null,\n    height: null,\n    width: null\n  },\n  wrapperStyle: null,\n  elementStyle: null,\n  initialStyle: null,\n  style: {\n    top: null,\n    bottom: null,\n    left: null,\n    right: null,\n    'margin-top': 0,\n    'margin-bottom': 0,\n    'margin-left': 0,\n    'margin-right': 0\n  },\n  disabled: false\n};\n\nvar getAbsolutBoundingRect = function getAbsolutBoundingRect(el, fixedHeight) {\n  var rect = el.getBoundingClientRect();\n  var top = rect.top + _scrollfeatures2.default.windowY;\n  var height = fixedHeight || rect.height;\n  return {\n    top: top,\n    bottom: top + height,\n    height: height,\n    width: rect.width,\n    left: rect.left,\n    right: rect.right\n  };\n};\n\nvar addBounds = function addBounds(rect1, rect2) {\n  var rect = (0, _objectAssign2.default)({}, rect1);\n  rect.top -= rect2.top;\n  rect.left -= rect2.left;\n  rect.right = rect.left + rect1.width;\n  rect.bottom = rect.top + rect1.height;\n  return rect;\n};\n\nvar getPositionStyle = function getPositionStyle(el) {\n  var result = {};\n  var style = window.getComputedStyle(el, null);\n\n  for (var key in initialState.style) {\n    var value = parseInt(style.getPropertyValue(key));\n    value = isNaN(value) ? null : value;\n    result[key] = value;\n  }\n\n  return result;\n};\n\nvar getPreviousElementSibling = function getPreviousElementSibling(el) {\n  var prev = el.previousElementSibling;\n\n  if (prev && prev.tagName.toLocaleLowerCase() === 'script') {\n    prev = getPreviousElementSibling(prev);\n  }\n\n  return prev;\n};\n\nvar ReactStickyState = function (_Component) {\n  (0, _inherits3.default)(ReactStickyState, _Component);\n\n  function ReactStickyState(props, context) {\n    (0, _classCallCheck3.default)(this, ReactStickyState);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props, context));\n\n    _this._updatingBounds = false;\n    _this._shouldComponentUpdate = true;\n    _this._updatingState = false;\n    _this.state = (0, _objectAssign2.default)({}, initialState, {\n      disabled: props.disabled\n    });\n\n    if (props.debug === true) {\n      log = console.log.bind(console);\n    }\n\n    return _this;\n  }\n\n  ReactStickyState.prototype.getBoundingClientRect = function getBoundingClientRect() {\n    return this.refs.el.getBoundingClientRect();\n  };\n\n  ReactStickyState.prototype.getBounds = function getBounds(noCache) {\n    var clientRect = this.getBoundingClientRect();\n    var offsetHeight = _scrollfeatures2.default.documentHeight;\n    noCache = noCache === true;\n\n    if (noCache !== true && this.state.bounds.height !== null) {\n      if (this.state.offsetHeight === offsetHeight && clientRect.height === this.state.bounds.height) {\n        return {\n          offsetHeight: offsetHeight,\n          style: this.state.style,\n          bounds: this.state.bounds,\n          restrict: this.state.restrict\n        };\n      }\n    } // var style = noCache ? this.state.style : getPositionStyle(this.el);\n\n\n    var initialStyle = this.state.initialStyle;\n\n    if (!initialStyle) {\n      initialStyle = getPositionStyle(this.refs.el);\n    }\n\n    var style = initialStyle;\n    var child = this.refs.wrapper || this.refs.el;\n    var rect;\n    var restrict;\n    var offsetY = 0; // var offsetX = 0;\n\n    if (!_featureDetect2.default.sticky) {\n      rect = getAbsolutBoundingRect(child, clientRect.height);\n\n      if (this.hasOwnScrollTarget) {\n        var parentRect = getAbsolutBoundingRect(this.scrollTarget);\n        offsetY = this.scroll.y;\n        rect = addBounds(rect, parentRect);\n        restrict = parentRect;\n        restrict.top = 0;\n        restrict.height = this.scroll.scrollHeight || restrict.height;\n        restrict.bottom = restrict.height;\n      }\n    } else {\n      var elem = getPreviousElementSibling(child);\n      offsetY = 0;\n\n      if (elem) {\n        offsetY = parseInt(window.getComputedStyle(elem)['margin-bottom']);\n        offsetY = offsetY || 0;\n        rect = getAbsolutBoundingRect(elem);\n\n        if (this.hasOwnScrollTarget) {\n          rect = addBounds(rect, getAbsolutBoundingRect(this.scrollTarget));\n          offsetY += this.scroll.y;\n        }\n\n        rect.top = rect.bottom + offsetY;\n      } else {\n        elem = child.parentNode;\n        offsetY = parseInt(window.getComputedStyle(elem)['padding-top']);\n        offsetY = offsetY || 0;\n        rect = getAbsolutBoundingRect(elem);\n\n        if (this.hasOwnScrollTarget) {\n          rect = addBounds(rect, getAbsolutBoundingRect(this.scrollTarget));\n          offsetY += this.scroll.y;\n        }\n\n        rect.top = rect.top + offsetY;\n      }\n\n      if (this.hasOwnScrollTarget) {\n        restrict = getAbsolutBoundingRect(this.scrollTarget);\n        restrict.top = 0;\n        restrict.height = this.scroll.scrollHeight || restrict.height;\n        restrict.bottom = restrict.height;\n      }\n\n      rect.height = child.clientHeight;\n      rect.width = child.clientWidth;\n      rect.bottom = rect.top + rect.height;\n    }\n\n    restrict = restrict || getAbsolutBoundingRect(child.parentNode);\n    return {\n      offsetHeight: offsetHeight,\n      style: style,\n      bounds: rect,\n      initialStyle: initialStyle,\n      restrict: restrict\n    };\n  };\n\n  ReactStickyState.prototype.updateBounds = function updateBounds(silent, noCache, cb) {\n    var _this2 = this;\n\n    noCache = noCache === true;\n    this._shouldComponentUpdate = silent !== true;\n    this.setState(this.getBounds(noCache), function () {\n      _this2._shouldComponentUpdate = true;\n\n      if (cb) {\n        cb();\n      }\n    });\n  }; // updateFixedOffset() {\n  //   if (this.hasOwnScrollTarget && !Can.sticky) {\n  //     if (this.state.sticky) {\n  //       this.setState({ fixedOffset: this.scrollTarget.getBoundingClientRect().top + 'px' });\n  //       if (!this.hasWindowScrollListener) {\n  //         this.hasWindowScrollListener = true;\n  //         ScrollFeatures.getInstance(window).on('scroll:progress', this.updateFixedOffset);\n  //       }\n  //     } else {\n  //       this.setState({ fixedOffset: '' });\n  //       if (this.hasWindowScrollListener) {\n  //         this.hasWindowScrollListener = false;\n  //         ScrollFeatures.getInstance(window).off('scroll:progress', this.updateFixedOffset);\n  //       }\n  //     }\n  //   }\n  // }\n\n\n  ReactStickyState.prototype.updateFixedOffset = function updateFixedOffset() {\n    var fixedOffset = this.state.fixedOffset;\n\n    if (this.state.sticky) {\n      this.setState({\n        fixedOffset: this.scrollTarget.getBoundingClientRect().top + 'px;'\n      });\n    } else {\n      this.setState({\n        fixedOffset: ''\n      });\n    } // if (fixedOffset !== this.state.fixedOffset) {\n    //   this.render();\n    // }\n\n  };\n\n  ReactStickyState.prototype.addSrollHandler = function addSrollHandler() {\n    if (!this.scroll) {\n      var hasScrollTarget = _scrollfeatures2.default.hasInstance(this.scrollTarget);\n\n      this.scroll = _scrollfeatures2.default.getInstance(this.scrollTarget);\n      this.onScroll = this.onScroll.bind(this);\n      this.scroll.on('scroll:start', this.onScroll);\n      this.scroll.on('scroll:progress', this.onScroll);\n      this.scroll.on('scroll:stop', this.onScroll);\n\n      if (this.props.scrollClass.active) {\n        this.onScrollDirection = this.onScrollDirection.bind(this);\n        this.scroll.on('scroll:up', this.onScrollDirection);\n        this.scroll.on('scroll:down', this.onScrollDirection);\n\n        if (!this.props.scrollClass.persist) {\n          this.scroll.on('scroll:stop', this.onScrollDirection);\n        }\n      }\n\n      if (hasScrollTarget && this.scroll.scrollY > 0) {\n        this.scroll.trigger('scroll:progress');\n      }\n    }\n  };\n\n  ReactStickyState.prototype.removeSrollHandler = function removeSrollHandler() {\n    if (this.scroll) {\n      this.scroll.off('scroll:start', this.onScroll);\n      this.scroll.off('scroll:progress', this.onScroll);\n      this.scroll.off('scroll:stop', this.onScroll);\n\n      if (this.props.scrollClass.active) {\n        this.scroll.off('scroll:up', this.onScrollDirection);\n        this.scroll.off('scroll:down', this.onScrollDirection);\n        this.scroll.off('scroll:stop', this.onScrollDirection);\n      }\n\n      if (!this.scroll.hasListeners()) {\n        this.scroll.destroy();\n      }\n\n      this.onScroll = null;\n      this.onScrollDirection = null;\n      this.scroll = null;\n    }\n  };\n\n  ReactStickyState.prototype.addResizeHandler = function addResizeHandler() {\n    if (!this.onResize) {\n      this.onResize = this.update.bind(this);\n      window.addEventListener('sticky:update', this.onResize, false);\n      window.addEventListener('resize', this.onResize, false);\n      window.addEventListener('orientationchange', this.onResize, false);\n    }\n  };\n\n  ReactStickyState.prototype.removeResizeHandler = function removeResizeHandler() {\n    if (this.onResize) {\n      window.removeEventListener('sticky:update', this.onResize);\n      window.removeEventListener('resize', this.onResize);\n      window.removeEventListener('orientationchange', this.onResize);\n      this.onResize = null;\n    }\n  };\n\n  ReactStickyState.prototype.destroy = function destroy() {\n    this._updatingBounds = false;\n    this._shouldComponentUpdate = false;\n    this._updatingState = false;\n    this.removeSrollHandler();\n    this.removeResizeHandler();\n    this.scrollTarget = null;\n  };\n\n  ReactStickyState.prototype.getScrollClasses = function getScrollClasses(obj) {\n    if (this.options.scrollClass.active) {\n      obj = obj || {};\n      var direction = this.scroll.y <= 0 || this.scroll.y + this.scroll.clientHeight >= this.scroll.scrollHeight ? 0 : this.scroll.directionY;\n      obj[this.options.scrollClass.up] = direction < 0;\n      obj[this.options.scrollClass.down] = direction > 0;\n    }\n\n    return obj;\n  };\n\n  ReactStickyState.prototype.getScrollClass = function getScrollClass() {\n    if (this.props.scrollClass.up || this.props.scrollClass.down) {\n      var direction = this.scroll.y <= 0 || this.scroll.y + this.scroll.clientHeight >= this.scroll.scrollHeight ? 0 : this.scroll.directionY;\n      var scrollClass = direction < 0 ? this.props.scrollClass.up : this.props.scrollClass.down;\n      scrollClass = direction === 0 ? null : scrollClass;\n      return scrollClass;\n    }\n\n    return null;\n  };\n\n  ReactStickyState.prototype.onScrollDirection = function onScrollDirection(e) {\n    if (this.state.sticky || e && e.type === _scrollfeatures2.default.events.SCROLL_STOP) {\n      this.setState({\n        scrollClass: this.getScrollClass()\n      });\n    }\n  };\n\n  ReactStickyState.prototype.onScroll = function onScroll(e) {\n    this.updateStickyState(false);\n\n    if (this.hasOwnScrollTarget && !_featureDetect2.default.sticky) {\n      this.updateFixedOffset();\n\n      if (this.state.sticky && !this.hasWindowScrollListener) {\n        this.hasWindowScrollListener = true;\n\n        _scrollfeatures2.default.getInstance(window).on('scroll:progress', this.updateFixedOffset);\n      } else if (!this.state.sticky && this.hasWindowScrollListener) {\n        this.hasWindowScrollListener = false;\n\n        _scrollfeatures2.default.getInstance(window).off('scroll:progress', this.updateFixedOffset);\n      }\n    }\n  };\n\n  ReactStickyState.prototype.update = function update() {\n    var _this3 = this; // this.scroll.updateScrollPosition();\n\n\n    this.updateBounds(true, true, function () {\n      _this3.updateStickyState(false);\n    });\n  }; // update(force = false) {\n  //   if (!this._updatingBounds) {\n  //     this._updatingBounds = true;\n  //     this.scroll.updateScrollPosition();\n  //     this.updateBounds(true, true, () => {\n  //       this.updateBounds(force, true, () => {\n  //         this.scroll.updateScrollPosition();\n  //         var updateSticky = this.updateStickyState(false, () => {\n  //           if (force && !updateSticky) {\n  //             this.forceUpdate();\n  //           }\n  //         });\n  //         this._updatingBounds = false;\n  //       });\n  //     });\n  //   }\n  // }\n\n\n  ReactStickyState.prototype.getStickyState = function getStickyState() {\n    if (this.state.disabled) {\n      return {\n        sticky: false,\n        absolute: false\n      };\n    }\n\n    var scrollY = this.scroll.y; // var scrollX = this.scroll.x;\n\n    var top = this.state.style.top;\n    var bottom = this.state.style.bottom; // var left = this.state.style.left;\n    // var right = this.state.style.right;\n\n    var sticky = this.state.sticky;\n    var absolute = this.state.absolute;\n\n    if (top !== null) {\n      var offsetBottom = this.state.restrict.bottom - this.state.bounds.height - top;\n      top = this.state.bounds.top - top;\n\n      if (this.state.sticky === false && (scrollY >= top && scrollY <= offsetBottom || top <= 0 && scrollY < top)) {\n        sticky = true;\n        absolute = false;\n      } else if (this.state.sticky && (top > 0 && scrollY < top || scrollY > offsetBottom)) {\n        sticky = false;\n        absolute = scrollY > offsetBottom;\n      }\n    } else if (bottom !== null) {\n      scrollY += window.innerHeight;\n      var offsetTop = this.state.restrict.top + this.state.bounds.height - bottom;\n      bottom = this.state.bounds.bottom + bottom;\n\n      if (this.state.sticky === false && scrollY <= bottom && scrollY >= offsetTop) {\n        sticky = true;\n        absolute = false;\n      } else if (this.state.sticky && (scrollY > bottom || scrollY < offsetTop)) {\n        sticky = false;\n        absolute = scrollY <= offsetTop;\n      }\n    }\n\n    return {\n      sticky: sticky,\n      absolute: absolute\n    };\n  };\n\n  ReactStickyState.prototype.updateStickyState = function updateStickyState(silent) {\n    var _this4 = this;\n\n    var values = this.getStickyState();\n\n    if (values.sticky !== this.state.sticky || values.absolute !== this.state.absolute) {\n      this._shouldComponentUpdate = silent !== true;\n      values = (0, _objectAssign2.default)(values, this.getBounds(false));\n      this._updatingState = true;\n      this.setState(values, function () {\n        _this4._shouldComponentUpdate = true;\n        _this4._updatingState = false;\n      });\n    }\n  }; // updateStickyState(bounds = true, cb) {\n  //   if (this._updatingState) {\n  //     return;\n  //   }\n  //   var values = this.getStickyState();\n  //   if (values.sticky !== this.state.sticky || values.absolute !== this.state.absolute) {\n  //     this._updatingState = true;\n  //     if (bounds) {\n  //       values = assign(values, this.getBounds(), { scrollClass: this.getScrollClass() });\n  //     }\n  //     this.setState(values, () => {\n  //       this._updatingState = false;\n  //       if (typeof cb === 'function') {\n  //         cb();\n  //       }\n  //     });\n  //     return true;\n  //   } else if (typeof cb === 'function') {\n  //     cb();\n  //   }\n  //   return false;\n  // }\n\n\n  ReactStickyState.prototype.initialize = function initialize() {\n    var _this5 = this;\n\n    if (!this.state.initialized && !this.state.disabled) {\n      this.setState({\n        initialized: true\n      }, function () {\n        var child = _this5.refs.wrapper || _this5.refs.el;\n        _this5.scrollTarget = _scrollfeatures2.default.getScrollParent(child);\n        _this5.hasOwnScrollTarget = _this5.scrollTarget !== window;\n\n        if (_this5.hasOwnScrollTarget) {\n          _this5.updateFixedOffset = _this5.updateFixedOffset.bind(_this5);\n        }\n\n        _this5.addSrollHandler();\n\n        _this5.addResizeHandler();\n\n        _this5.update();\n      });\n    }\n  };\n\n  ReactStickyState.prototype.shouldComponentUpdate = function shouldComponentUpdate(newProps, newState) {\n    return this._shouldComponentUpdate;\n  };\n\n  ReactStickyState.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var _this6 = this;\n\n    var intialize = !this.state.initialized && nextProps.initialize;\n\n    if (nextProps.disabled !== this.state.disabled) {\n      this.setState({\n        disabled: nextProps.disabled\n      }, function () {\n        if (intialize) {\n          _this6.initialize();\n        }\n      });\n    }\n  };\n\n  ReactStickyState.prototype.componentDidMount = function componentDidMount() {\n    if (!this.state.initialized && this.props.initialize) {\n      this.initialize();\n    }\n  };\n\n  ReactStickyState.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.destroy();\n  };\n\n  ReactStickyState.prototype.render = function render() {\n    var _classNames, _classNames2, _classNames3, _classNames4;\n\n    if (!this.state.initialized) {\n      return this.props.children;\n    }\n\n    var element = _react2.default.Children.only(this.props.children);\n\n    var _props = this.props,\n        wrapperClass = _props.wrapperClass,\n        stickyClass = _props.stickyClass,\n        fixedClass = _props.fixedClass,\n        stateClass = _props.stateClass,\n        disabledClass = _props.disabledClass,\n        absoluteClass = _props.absoluteClass,\n        disabled = _props.disabled,\n        debug = _props.debug,\n        tagName = _props.tagName,\n        props = (0, _objectWithoutProperties3.default)(_props, ['wrapperClass', 'stickyClass', 'fixedClass', 'stateClass', 'disabledClass', 'absoluteClass', 'disabled', 'debug', 'tagName']);\n    var style;\n    var refName = 'el';\n    var className = (0, _classnames2.default)((_classNames = {}, _classNames[stickyClass] = !this.state.disabled, _classNames[disabledClass] = this.state.disabled, _classNames), (_classNames2 = {}, _classNames2[fixedClass] = !_featureDetect2.default.sticky, _classNames2), (_classNames3 = {}, _classNames3[stateClass] = this.state.sticky && !this.state.disabled, _classNames3), (_classNames4 = {}, _classNames4[absoluteClass] = this.state.absolute, _classNames4), this.state.scrollClass);\n\n    if (!_featureDetect2.default.sticky) {\n      if (this.state.absolute) {\n        style = {\n          marginTop: this.state.style.top !== null ? this.state.restrict.height - (this.state.bounds.height + this.state.style.top) + (this.state.restrict.top - this.state.bounds.top) + 'px' : '',\n          marginBottom: this.state.style.bottom !== null ? this.state.restrict.height - (this.state.bounds.height + this.state.style.bottom) + (this.state.restrict.bottom - this.state.bounds.bottom) + 'px' : ''\n        };\n      } else if (this.hasOwnScrollTarget && this.state.fixedOffset !== '') {\n        style = {\n          marginTop: this.state.fixedOffset\n        };\n      }\n    }\n\n    if (element) {\n      element = _react2.default.cloneElement(element, {\n        ref: refName,\n        style: style,\n        className: (0, _classnames2.default)(element.props.className, className)\n      });\n    } else {\n      var Comp = this.props.tagName;\n      element = _react2.default.createElement(Comp, (0, _extends3.default)({\n        ref: refName,\n        style: style,\n        className: className\n      }, props), this.props.children);\n    }\n\n    if (_featureDetect2.default.sticky) {\n      return element;\n    }\n\n    var height = this.state.disabled || this.state.bounds.height === null\n    /*|| (!this.state.sticky && !this.state.absolute)*/\n    ? 'auto' : this.state.bounds.height + 'px';\n    var marginTop = height === 'auto' ? '' : this.state.style['margin-top'] ? this.state.style['margin-top'] + 'px' : '';\n    var marginBottom = height === 'auto' ? '' : this.state.style['margin-bottom'] ? this.state.style['margin-bottom'] + 'px' : '';\n    style = {\n      height: height,\n      marginTop: marginTop,\n      marginBottom: marginBottom\n    };\n\n    if (this.state.absolute) {\n      style.position = 'relative';\n    }\n\n    return _react2.default.createElement('div', {\n      ref: 'wrapper',\n      className: wrapperClass,\n      style: style\n    }, element);\n  };\n\n  return ReactStickyState;\n}(_react.Component);\n\nReactStickyState.propTypes = {\n  initialize: _propTypes2.default.bool,\n  wrapperClass: _propTypes2.default.string,\n  stickyClass: _propTypes2.default.string,\n  fixedClass: _propTypes2.default.string,\n  stateClass: _propTypes2.default.string,\n  disabledClass: _propTypes2.default.string,\n  absoluteClass: _propTypes2.default.string,\n  disabled: _propTypes2.default.bool,\n  debug: _propTypes2.default.bool,\n  wrapFixedSticky: _propTypes2.default.bool,\n  tagName: _propTypes2.default.string,\n  scrollClass: _propTypes2.default.shape({\n    down: _propTypes2.default.string,\n    up: _propTypes2.default.string,\n    none: _propTypes2.default.string,\n    persist: _propTypes2.default.bool,\n    active: _propTypes2.default.bool\n  })\n};\nReactStickyState.defaultProps = {\n  initialize: true,\n  wrapperClass: 'sticky-wrap',\n  stickyClass: 'sticky',\n  fixedClass: 'sticky-fixed',\n  stateClass: 'is-sticky',\n  disabledClass: 'sticky-disabled',\n  absoluteClass: 'is-absolute',\n  wrapFixedSticky: true,\n  debug: false,\n  disabled: false,\n  tagName: 'div',\n  scrollClass: {\n    down: null,\n    up: null,\n    none: null,\n    persist: false,\n    active: false\n  }\n};\nexports.default = ReactStickyState;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["C:/Users/lawrence/CORD-19/frontend/node_modules/react-sticky-state/lib/react-sticky-state.js"],"names":["exports","__esModule","_extends2","require","_extends3","_interopRequireDefault","_objectWithoutProperties2","_objectWithoutProperties3","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_propTypes","_propTypes2","_classnames","_classnames2","_scrollfeatures","_scrollfeatures2","_objectAssign","_objectAssign2","_featureDetect","_featureDetect2","obj","default","log","initialState","initialized","sticky","absolute","fixedOffset","offsetHeight","bounds","top","left","right","bottom","height","width","restrict","wrapperStyle","elementStyle","initialStyle","style","disabled","getAbsolutBoundingRect","el","fixedHeight","rect","getBoundingClientRect","windowY","addBounds","rect1","rect2","getPositionStyle","result","window","getComputedStyle","key","value","parseInt","getPropertyValue","isNaN","getPreviousElementSibling","prev","previousElementSibling","tagName","toLocaleLowerCase","ReactStickyState","_Component","props","context","_this","call","_updatingBounds","_shouldComponentUpdate","_updatingState","state","debug","console","bind","prototype","refs","getBounds","noCache","clientRect","documentHeight","child","wrapper","offsetY","hasOwnScrollTarget","parentRect","scrollTarget","scroll","y","scrollHeight","elem","parentNode","clientHeight","clientWidth","updateBounds","silent","cb","_this2","setState","updateFixedOffset","addSrollHandler","hasScrollTarget","hasInstance","getInstance","onScroll","on","scrollClass","active","onScrollDirection","persist","scrollY","trigger","removeSrollHandler","off","hasListeners","destroy","addResizeHandler","onResize","update","addEventListener","removeResizeHandler","removeEventListener","getScrollClasses","options","direction","directionY","up","down","getScrollClass","e","type","events","SCROLL_STOP","updateStickyState","hasWindowScrollListener","_this3","getStickyState","offsetBottom","innerHeight","offsetTop","_this4","values","initialize","_this5","getScrollParent","shouldComponentUpdate","newProps","newState","componentWillReceiveProps","nextProps","_this6","intialize","componentDidMount","componentWillUnmount","render","_classNames","_classNames2","_classNames3","_classNames4","children","element","Children","only","_props","wrapperClass","stickyClass","fixedClass","stateClass","disabledClass","absoluteClass","refName","className","marginTop","marginBottom","cloneElement","ref","Comp","createElement","position","Component","propTypes","bool","string","wrapFixedSticky","shape","none","defaultProps","module"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _scrollfeatures = require('scrollfeatures');\n\nvar _scrollfeatures2 = _interopRequireDefault(_scrollfeatures);\n\nvar _objectAssign = require('object-assign');\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _featureDetect = require('./featureDetect');\n\nvar _featureDetect2 = _interopRequireDefault(_featureDetect);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar log = function log() {};\n\nvar initialState = {\n  initialized: false,\n  sticky: false,\n  absolute: false,\n  fixedOffset: '',\n  offsetHeight: 0,\n  bounds: {\n    top: null,\n    left: null,\n    right: null,\n    bottom: null,\n    height: null,\n    width: null\n  },\n  restrict: {\n    top: null,\n    left: null,\n    right: null,\n    bottom: null,\n    height: null,\n    width: null\n  },\n  wrapperStyle: null,\n  elementStyle: null,\n  initialStyle: null,\n  style: {\n    top: null,\n    bottom: null,\n    left: null,\n    right: null,\n    'margin-top': 0,\n    'margin-bottom': 0,\n    'margin-left': 0,\n    'margin-right': 0\n  },\n  disabled: false\n};\n\nvar getAbsolutBoundingRect = function getAbsolutBoundingRect(el, fixedHeight) {\n  var rect = el.getBoundingClientRect();\n  var top = rect.top + _scrollfeatures2.default.windowY;\n  var height = fixedHeight || rect.height;\n  return {\n    top: top,\n    bottom: top + height,\n    height: height,\n    width: rect.width,\n    left: rect.left,\n    right: rect.right\n  };\n};\n\nvar addBounds = function addBounds(rect1, rect2) {\n  var rect = (0, _objectAssign2.default)({}, rect1);\n  rect.top -= rect2.top;\n  rect.left -= rect2.left;\n  rect.right = rect.left + rect1.width;\n  rect.bottom = rect.top + rect1.height;\n  return rect;\n};\n\nvar getPositionStyle = function getPositionStyle(el) {\n\n  var result = {};\n  var style = window.getComputedStyle(el, null);\n\n  for (var key in initialState.style) {\n    var value = parseInt(style.getPropertyValue(key));\n    value = isNaN(value) ? null : value;\n    result[key] = value;\n  }\n\n  return result;\n};\n\nvar getPreviousElementSibling = function getPreviousElementSibling(el) {\n  var prev = el.previousElementSibling;\n  if (prev && prev.tagName.toLocaleLowerCase() === 'script') {\n    prev = getPreviousElementSibling(prev);\n  }\n  return prev;\n};\n\nvar ReactStickyState = function (_Component) {\n  (0, _inherits3.default)(ReactStickyState, _Component);\n\n  function ReactStickyState(props, context) {\n    (0, _classCallCheck3.default)(this, ReactStickyState);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props, context));\n\n    _this._updatingBounds = false;\n    _this._shouldComponentUpdate = true;\n    _this._updatingState = false;\n\n    _this.state = (0, _objectAssign2.default)({}, initialState, { disabled: props.disabled });\n\n    if (props.debug === true) {\n      log = console.log.bind(console);\n    }\n\n    return _this;\n  }\n\n  ReactStickyState.prototype.getBoundingClientRect = function getBoundingClientRect() {\n    return this.refs.el.getBoundingClientRect();\n  };\n\n  ReactStickyState.prototype.getBounds = function getBounds(noCache) {\n\n    var clientRect = this.getBoundingClientRect();\n    var offsetHeight = _scrollfeatures2.default.documentHeight;\n    noCache = noCache === true;\n\n    if (noCache !== true && this.state.bounds.height !== null) {\n      if (this.state.offsetHeight === offsetHeight && clientRect.height === this.state.bounds.height) {\n        return {\n          offsetHeight: offsetHeight,\n          style: this.state.style,\n          bounds: this.state.bounds,\n          restrict: this.state.restrict\n        };\n      }\n    }\n\n    // var style = noCache ? this.state.style : getPositionStyle(this.el);\n    var initialStyle = this.state.initialStyle;\n    if (!initialStyle) {\n      initialStyle = getPositionStyle(this.refs.el);\n    }\n\n    var style = initialStyle;\n    var child = this.refs.wrapper || this.refs.el;\n    var rect;\n    var restrict;\n    var offsetY = 0;\n    // var offsetX = 0;\n\n    if (!_featureDetect2.default.sticky) {\n      rect = getAbsolutBoundingRect(child, clientRect.height);\n      if (this.hasOwnScrollTarget) {\n        var parentRect = getAbsolutBoundingRect(this.scrollTarget);\n        offsetY = this.scroll.y;\n        rect = addBounds(rect, parentRect);\n        restrict = parentRect;\n        restrict.top = 0;\n        restrict.height = this.scroll.scrollHeight || restrict.height;\n        restrict.bottom = restrict.height;\n      }\n    } else {\n      var elem = getPreviousElementSibling(child);\n      offsetY = 0;\n\n      if (elem) {\n        offsetY = parseInt(window.getComputedStyle(elem)['margin-bottom']);\n        offsetY = offsetY || 0;\n        rect = getAbsolutBoundingRect(elem);\n        if (this.hasOwnScrollTarget) {\n          rect = addBounds(rect, getAbsolutBoundingRect(this.scrollTarget));\n          offsetY += this.scroll.y;\n        }\n        rect.top = rect.bottom + offsetY;\n      } else {\n        elem = child.parentNode;\n        offsetY = parseInt(window.getComputedStyle(elem)['padding-top']);\n        offsetY = offsetY || 0;\n        rect = getAbsolutBoundingRect(elem);\n        if (this.hasOwnScrollTarget) {\n          rect = addBounds(rect, getAbsolutBoundingRect(this.scrollTarget));\n          offsetY += this.scroll.y;\n        }\n        rect.top = rect.top + offsetY;\n      }\n      if (this.hasOwnScrollTarget) {\n        restrict = getAbsolutBoundingRect(this.scrollTarget);\n        restrict.top = 0;\n        restrict.height = this.scroll.scrollHeight || restrict.height;\n        restrict.bottom = restrict.height;\n      }\n\n      rect.height = child.clientHeight;\n      rect.width = child.clientWidth;\n      rect.bottom = rect.top + rect.height;\n    }\n\n    restrict = restrict || getAbsolutBoundingRect(child.parentNode);\n\n    return {\n      offsetHeight: offsetHeight,\n      style: style,\n      bounds: rect,\n      initialStyle: initialStyle,\n      restrict: restrict\n    };\n  };\n\n  ReactStickyState.prototype.updateBounds = function updateBounds(silent, noCache, cb) {\n    var _this2 = this;\n\n    noCache = noCache === true;\n    this._shouldComponentUpdate = silent !== true;\n\n    this.setState(this.getBounds(noCache), function () {\n      _this2._shouldComponentUpdate = true;\n      if (cb) {\n        cb();\n      }\n    });\n  };\n\n  // updateFixedOffset() {\n  //   if (this.hasOwnScrollTarget && !Can.sticky) {\n\n  //     if (this.state.sticky) {\n  //       this.setState({ fixedOffset: this.scrollTarget.getBoundingClientRect().top + 'px' });\n  //       if (!this.hasWindowScrollListener) {\n  //         this.hasWindowScrollListener = true;\n  //         ScrollFeatures.getInstance(window).on('scroll:progress', this.updateFixedOffset);\n  //       }\n  //     } else {\n  //       this.setState({ fixedOffset: '' });\n  //       if (this.hasWindowScrollListener) {\n  //         this.hasWindowScrollListener = false;\n  //         ScrollFeatures.getInstance(window).off('scroll:progress', this.updateFixedOffset);\n  //       }\n  //     }\n  //   }\n  // }\n\n\n  ReactStickyState.prototype.updateFixedOffset = function updateFixedOffset() {\n\n    var fixedOffset = this.state.fixedOffset;\n    if (this.state.sticky) {\n      this.setState({ fixedOffset: this.scrollTarget.getBoundingClientRect().top + 'px;' });\n    } else {\n      this.setState({ fixedOffset: '' });\n    }\n    // if (fixedOffset !== this.state.fixedOffset) {\n    //   this.render();\n    // }\n  };\n\n  ReactStickyState.prototype.addSrollHandler = function addSrollHandler() {\n    if (!this.scroll) {\n      var hasScrollTarget = _scrollfeatures2.default.hasInstance(this.scrollTarget);\n      this.scroll = _scrollfeatures2.default.getInstance(this.scrollTarget);\n      this.onScroll = this.onScroll.bind(this);\n      this.scroll.on('scroll:start', this.onScroll);\n      this.scroll.on('scroll:progress', this.onScroll);\n      this.scroll.on('scroll:stop', this.onScroll);\n\n      if (this.props.scrollClass.active) {\n        this.onScrollDirection = this.onScrollDirection.bind(this);\n        this.scroll.on('scroll:up', this.onScrollDirection);\n        this.scroll.on('scroll:down', this.onScrollDirection);\n        if (!this.props.scrollClass.persist) {\n          this.scroll.on('scroll:stop', this.onScrollDirection);\n        }\n      }\n      if (hasScrollTarget && this.scroll.scrollY > 0) {\n        this.scroll.trigger('scroll:progress');\n      }\n    }\n  };\n\n  ReactStickyState.prototype.removeSrollHandler = function removeSrollHandler() {\n    if (this.scroll) {\n      this.scroll.off('scroll:start', this.onScroll);\n      this.scroll.off('scroll:progress', this.onScroll);\n      this.scroll.off('scroll:stop', this.onScroll);\n      if (this.props.scrollClass.active) {\n        this.scroll.off('scroll:up', this.onScrollDirection);\n        this.scroll.off('scroll:down', this.onScrollDirection);\n        this.scroll.off('scroll:stop', this.onScrollDirection);\n      }\n      if (!this.scroll.hasListeners()) {\n        this.scroll.destroy();\n      }\n      this.onScroll = null;\n      this.onScrollDirection = null;\n      this.scroll = null;\n    }\n  };\n\n  ReactStickyState.prototype.addResizeHandler = function addResizeHandler() {\n    if (!this.onResize) {\n      this.onResize = this.update.bind(this);\n      window.addEventListener('sticky:update', this.onResize, false);\n      window.addEventListener('resize', this.onResize, false);\n      window.addEventListener('orientationchange', this.onResize, false);\n    }\n  };\n\n  ReactStickyState.prototype.removeResizeHandler = function removeResizeHandler() {\n    if (this.onResize) {\n      window.removeEventListener('sticky:update', this.onResize);\n      window.removeEventListener('resize', this.onResize);\n      window.removeEventListener('orientationchange', this.onResize);\n      this.onResize = null;\n    }\n  };\n\n  ReactStickyState.prototype.destroy = function destroy() {\n    this._updatingBounds = false;\n    this._shouldComponentUpdate = false;\n    this._updatingState = false;\n    this.removeSrollHandler();\n    this.removeResizeHandler();\n    this.scrollTarget = null;\n  };\n\n  ReactStickyState.prototype.getScrollClasses = function getScrollClasses(obj) {\n    if (this.options.scrollClass.active) {\n      obj = obj || {};\n      var direction = this.scroll.y <= 0 || this.scroll.y + this.scroll.clientHeight >= this.scroll.scrollHeight ? 0 : this.scroll.directionY;\n      obj[this.options.scrollClass.up] = direction < 0;\n      obj[this.options.scrollClass.down] = direction > 0;\n    }\n    return obj;\n  };\n\n  ReactStickyState.prototype.getScrollClass = function getScrollClass() {\n    if (this.props.scrollClass.up || this.props.scrollClass.down) {\n\n      var direction = this.scroll.y <= 0 || this.scroll.y + this.scroll.clientHeight >= this.scroll.scrollHeight ? 0 : this.scroll.directionY;\n      var scrollClass = direction < 0 ? this.props.scrollClass.up : this.props.scrollClass.down;\n      scrollClass = direction === 0 ? null : scrollClass;\n      return scrollClass;\n    }\n    return null;\n  };\n\n  ReactStickyState.prototype.onScrollDirection = function onScrollDirection(e) {\n    if (this.state.sticky || e && e.type === _scrollfeatures2.default.events.SCROLL_STOP) {\n      this.setState({\n        scrollClass: this.getScrollClass()\n      });\n    }\n  };\n\n  ReactStickyState.prototype.onScroll = function onScroll(e) {\n    this.updateStickyState(false);\n    if (this.hasOwnScrollTarget && !_featureDetect2.default.sticky) {\n      this.updateFixedOffset();\n      if (this.state.sticky && !this.hasWindowScrollListener) {\n        this.hasWindowScrollListener = true;\n        _scrollfeatures2.default.getInstance(window).on('scroll:progress', this.updateFixedOffset);\n      } else if (!this.state.sticky && this.hasWindowScrollListener) {\n        this.hasWindowScrollListener = false;\n        _scrollfeatures2.default.getInstance(window).off('scroll:progress', this.updateFixedOffset);\n      }\n    }\n  };\n\n  ReactStickyState.prototype.update = function update() {\n    var _this3 = this;\n\n    // this.scroll.updateScrollPosition();\n    this.updateBounds(true, true, function () {\n      _this3.updateStickyState(false);\n    });\n  };\n\n  // update(force = false) {\n\n  //   if (!this._updatingBounds) {\n  //     this._updatingBounds = true;\n  //     this.scroll.updateScrollPosition();\n  //     this.updateBounds(true, true, () => {\n  //       this.updateBounds(force, true, () => {\n  //         this.scroll.updateScrollPosition();\n  //         var updateSticky = this.updateStickyState(false, () => {\n  //           if (force && !updateSticky) {\n  //             this.forceUpdate();\n  //           }\n  //         });\n  //         this._updatingBounds = false;\n  //       });\n  //     });\n  //   }\n  // }\n\n\n  ReactStickyState.prototype.getStickyState = function getStickyState() {\n\n    if (this.state.disabled) {\n      return { sticky: false, absolute: false };\n    }\n\n    var scrollY = this.scroll.y;\n    // var scrollX = this.scroll.x;\n    var top = this.state.style.top;\n    var bottom = this.state.style.bottom;\n    // var left = this.state.style.left;\n    // var right = this.state.style.right;\n    var sticky = this.state.sticky;\n    var absolute = this.state.absolute;\n\n    if (top !== null) {\n      var offsetBottom = this.state.restrict.bottom - this.state.bounds.height - top;\n      top = this.state.bounds.top - top;\n\n      if (this.state.sticky === false && (scrollY >= top && scrollY <= offsetBottom || top <= 0 && scrollY < top)) {\n        sticky = true;\n        absolute = false;\n      } else if (this.state.sticky && (top > 0 && scrollY < top || scrollY > offsetBottom)) {\n        sticky = false;\n        absolute = scrollY > offsetBottom;\n      }\n    } else if (bottom !== null) {\n\n      scrollY += window.innerHeight;\n      var offsetTop = this.state.restrict.top + this.state.bounds.height - bottom;\n      bottom = this.state.bounds.bottom + bottom;\n\n      if (this.state.sticky === false && scrollY <= bottom && scrollY >= offsetTop) {\n        sticky = true;\n        absolute = false;\n      } else if (this.state.sticky && (scrollY > bottom || scrollY < offsetTop)) {\n        sticky = false;\n        absolute = scrollY <= offsetTop;\n      }\n    }\n    return { sticky: sticky, absolute: absolute };\n  };\n\n  ReactStickyState.prototype.updateStickyState = function updateStickyState(silent) {\n    var _this4 = this;\n\n    var values = this.getStickyState();\n\n    if (values.sticky !== this.state.sticky || values.absolute !== this.state.absolute) {\n      this._shouldComponentUpdate = silent !== true;\n      values = (0, _objectAssign2.default)(values, this.getBounds(false));\n      this._updatingState = true;\n      this.setState(values, function () {\n        _this4._shouldComponentUpdate = true;\n        _this4._updatingState = false;\n      });\n    }\n  };\n\n  // updateStickyState(bounds = true, cb) {\n  //   if (this._updatingState) {\n  //     return;\n  //   }\n  //   var values = this.getStickyState();\n\n  //   if (values.sticky !== this.state.sticky || values.absolute !== this.state.absolute) {\n  //     this._updatingState = true;\n  //     if (bounds) {\n  //       values = assign(values, this.getBounds(), { scrollClass: this.getScrollClass() });\n  //     }\n  //     this.setState(values, () => {\n  //       this._updatingState = false;\n  //       if (typeof cb === 'function') {\n  //         cb();\n  //       }\n  //     });\n  //     return true;\n  //   } else if (typeof cb === 'function') {\n  //     cb();\n  //   }\n  //   return false;\n  // }\n\n\n  ReactStickyState.prototype.initialize = function initialize() {\n    var _this5 = this;\n\n    if (!this.state.initialized && !this.state.disabled) {\n      this.setState({\n        initialized: true\n      }, function () {\n        var child = _this5.refs.wrapper || _this5.refs.el;\n        _this5.scrollTarget = _scrollfeatures2.default.getScrollParent(child);\n        _this5.hasOwnScrollTarget = _this5.scrollTarget !== window;\n        if (_this5.hasOwnScrollTarget) {\n          _this5.updateFixedOffset = _this5.updateFixedOffset.bind(_this5);\n        }\n\n        _this5.addSrollHandler();\n        _this5.addResizeHandler();\n        _this5.update();\n      });\n    }\n  };\n\n  ReactStickyState.prototype.shouldComponentUpdate = function shouldComponentUpdate(newProps, newState) {\n    return this._shouldComponentUpdate;\n  };\n\n  ReactStickyState.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var _this6 = this;\n\n    var intialize = !this.state.initialized && nextProps.initialize;\n\n    if (nextProps.disabled !== this.state.disabled) {\n      this.setState({\n        disabled: nextProps.disabled\n      }, function () {\n        if (intialize) {\n          _this6.initialize();\n        }\n      });\n    }\n  };\n\n  ReactStickyState.prototype.componentDidMount = function componentDidMount() {\n    if (!this.state.initialized && this.props.initialize) {\n      this.initialize();\n    }\n  };\n\n  ReactStickyState.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.destroy();\n  };\n\n  ReactStickyState.prototype.render = function render() {\n    var _classNames, _classNames2, _classNames3, _classNames4;\n\n    if (!this.state.initialized) {\n      return this.props.children;\n    }\n\n    var element = _react2.default.Children.only(this.props.children);\n\n    var _props = this.props,\n        wrapperClass = _props.wrapperClass,\n        stickyClass = _props.stickyClass,\n        fixedClass = _props.fixedClass,\n        stateClass = _props.stateClass,\n        disabledClass = _props.disabledClass,\n        absoluteClass = _props.absoluteClass,\n        disabled = _props.disabled,\n        debug = _props.debug,\n        tagName = _props.tagName,\n        props = (0, _objectWithoutProperties3.default)(_props, ['wrapperClass', 'stickyClass', 'fixedClass', 'stateClass', 'disabledClass', 'absoluteClass', 'disabled', 'debug', 'tagName']);\n\n\n    var style;\n    var refName = 'el';\n    var className = (0, _classnames2.default)((_classNames = {}, _classNames[stickyClass] = !this.state.disabled, _classNames[disabledClass] = this.state.disabled, _classNames), (_classNames2 = {}, _classNames2[fixedClass] = !_featureDetect2.default.sticky, _classNames2), (_classNames3 = {}, _classNames3[stateClass] = this.state.sticky && !this.state.disabled, _classNames3), (_classNames4 = {}, _classNames4[absoluteClass] = this.state.absolute, _classNames4), this.state.scrollClass);\n\n    if (!_featureDetect2.default.sticky) {\n      if (this.state.absolute) {\n\n        style = {\n          marginTop: this.state.style.top !== null ? this.state.restrict.height - (this.state.bounds.height + this.state.style.top) + (this.state.restrict.top - this.state.bounds.top) + 'px' : '',\n          marginBottom: this.state.style.bottom !== null ? this.state.restrict.height - (this.state.bounds.height + this.state.style.bottom) + (this.state.restrict.bottom - this.state.bounds.bottom) + 'px' : ''\n        };\n      } else if (this.hasOwnScrollTarget && this.state.fixedOffset !== '') {\n        style = {\n          marginTop: this.state.fixedOffset\n        };\n      }\n    }\n\n    if (element) {\n      element = _react2.default.cloneElement(element, { ref: refName, style: style, className: (0, _classnames2.default)(element.props.className, className) });\n    } else {\n      var Comp = this.props.tagName;\n      element = _react2.default.createElement(\n        Comp,\n        (0, _extends3.default)({ ref: refName, style: style, className: className }, props),\n        this.props.children\n      );\n    }\n\n    if (_featureDetect2.default.sticky) {\n      return element;\n    }\n\n    var height = this.state.disabled || this.state.bounds.height === null /*|| (!this.state.sticky && !this.state.absolute)*/ ? 'auto' : this.state.bounds.height + 'px';\n    var marginTop = height === 'auto' ? '' : this.state.style['margin-top'] ? this.state.style['margin-top'] + 'px' : '';\n    var marginBottom = height === 'auto' ? '' : this.state.style['margin-bottom'] ? this.state.style['margin-bottom'] + 'px' : '';\n\n    style = {\n      height: height,\n      marginTop: marginTop,\n      marginBottom: marginBottom\n    };\n    if (this.state.absolute) {\n      style.position = 'relative';\n    }\n    return _react2.default.createElement(\n      'div',\n      { ref: 'wrapper', className: wrapperClass, style: style },\n      element\n    );\n  };\n\n  return ReactStickyState;\n}(_react.Component);\n\nReactStickyState.propTypes = {\n  initialize: _propTypes2.default.bool,\n  wrapperClass: _propTypes2.default.string,\n  stickyClass: _propTypes2.default.string,\n  fixedClass: _propTypes2.default.string,\n  stateClass: _propTypes2.default.string,\n  disabledClass: _propTypes2.default.string,\n  absoluteClass: _propTypes2.default.string,\n  disabled: _propTypes2.default.bool,\n  debug: _propTypes2.default.bool,\n  wrapFixedSticky: _propTypes2.default.bool,\n  tagName: _propTypes2.default.string,\n  scrollClass: _propTypes2.default.shape({\n    down: _propTypes2.default.string,\n    up: _propTypes2.default.string,\n    none: _propTypes2.default.string,\n    persist: _propTypes2.default.bool,\n    active: _propTypes2.default.bool\n  })\n};\nReactStickyState.defaultProps = {\n  initialize: true,\n  wrapperClass: 'sticky-wrap',\n  stickyClass: 'sticky',\n  fixedClass: 'sticky-fixed',\n  stateClass: 'is-sticky',\n  disabledClass: 'sticky-disabled',\n  absoluteClass: 'is-absolute',\n  wrapFixedSticky: true,\n  debug: false,\n  disabled: false,\n  tagName: 'div',\n  scrollClass: {\n    down: null,\n    up: null,\n    none: null,\n    persist: false,\n    active: false\n  }\n};\nexports.default = ReactStickyState;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}